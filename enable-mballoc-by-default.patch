ext4: Enable and Show mballoc features

From: Aneesh Kumar K.V <aneesh.kumar@linux.vnet.ibm.com>

mballoc are enabled by default.
So if they are are not set in mount options
that means the user explicity disabled them
using nomablloc option. Show
the same in ext4_show_options

Signed-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.vnet.ibm.com>
Acked-by: Eric Sandeen <sandeen@redhat.com>
Signed-off-by: Mingming Cao <cmm@us.ibm.com>
---

 fs/ext4/super.c |    7 +++++++
 1 file changed, 7 insertions(+)


Index: linux-2.6.24-rc7/fs/ext4/super.c
===================================================================
--- linux-2.6.24-rc7.orig/fs/ext4/super.c	2008-01-16 13:52:19.000000000 -0800
+++ linux-2.6.24-rc7/fs/ext4/super.c	2008-01-16 13:52:28.000000000 -0800
@@ -736,6 +736,8 @@ static int ext4_show_options(struct seq_
 		seq_puts(seq, ",nobh");
 	if (!test_opt(sb, EXTENTS))
 		seq_puts(seq, ",noextents");
+	if (!test_opt(sb, MBALLOC))
+		seq_puts(seq, ",nomballoc");
 	if (test_opt(sb, I_VERSION))
 		seq_puts(seq, ",i_version");
 
@@ -1902,6 +1904,11 @@ static int ext4_fill_super (struct super
 	 * User -o noextents to turn it off
 	 */
 	set_opt(sbi->s_mount_opt, EXTENTS);
+	/*
+	 * turn on mballoc feature by default in ext4 filesystem
+	 * User -o nomballoc to turn it off
+	 */
+	set_opt(sbi->s_mount_opt, MBALLOC);
 
 	if (!parse_options ((char *) data, sb, &journal_inum, &journal_devnum,
 			    NULL, 0))
