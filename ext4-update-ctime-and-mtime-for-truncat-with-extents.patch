ext4: update ctime and mtime for truncate with extents.

From: Solofo Ramangalahy <Solofo.Ramangalahy@bull.net>

The recently announced "Linux POSIX file system test suite"
caught a truncate issue when using extents:
mtime and ctime are not updated when truncate is successful.

This is the single issue caught with "default" ext4 (mkfs and mount
with minimal options).
The testsuite does not report failure with -o noextents.

With the following patch, all tests of the testsuite pass.

Signed-off-by: Solofo Ramangalahy <Solofo.Ramangalahy@bull.net>
Signed-off-by: Mingming Cao <cmm@us.ibm.com> 

---
 fs/ext4/extents.c |    2 ++
 1 file changed, 2 insertions(+)

Index: linux-2.6.25-rc9/fs/ext4/extents.c
===================================================================
--- linux-2.6.25-rc9.orig/fs/ext4/extents.c	2008-04-14 11:12:45.000000000 -0700
+++ linux-2.6.25-rc9/fs/ext4/extents.c	2008-04-14 11:12:51.000000000 -0700
@@ -2808,6 +2808,8 @@ out_stop:
 		ext4_orphan_del(handle, inode);
 
 	up_write(&EXT4_I(inode)->i_data_sem);
+	inode->i_mtime = inode->i_ctime = ext4_current_time(inode);
+	ext4_mark_inode_dirty(handle, inode);
 	ext4_journal_stop(handle);
 }
 
