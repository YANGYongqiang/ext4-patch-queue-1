Add a mount option to turn off delayed allocation.

Signed-off-by: Mingming Cao <cmm@us.ibm.com>
---
Index: linux-2.6.22-rc4/fs/ext4/super.c
===================================================================
--- linux-2.6.22-rc4.orig/fs/ext4/super.c	2007-06-14 17:35:03.000000000 -0700
+++ linux-2.6.22-rc4/fs/ext4/super.c	2007-06-14 17:37:02.000000000 -0700
@@ -735,7 +735,7 @@ enum {
 	Opt_jqfmt_vfsold, Opt_jqfmt_vfsv0, Opt_quota, Opt_noquota,
 	Opt_ignore, Opt_barrier, Opt_err, Opt_resize, Opt_usrquota,
 	Opt_grpquota, Opt_extents, Opt_noextents, Opt_noversion,
-	Opt_delayed_alloc,
+	Opt_delayed_alloc, Opt_nodelayed_alloc,
 };
 
 static match_table_t tokens = {
@@ -789,6 +789,7 @@ static match_table_t tokens = {
 	{Opt_noextents, "noextents"},
 	{Opt_noversion, "noversion"},
 	{Opt_delayed_alloc, "delalloc"},
+	{Opt_nodelayed_alloc, "nodelalloc"},
 	{Opt_err, NULL},
 	{Opt_resize, "resize"},
 };
@@ -1106,6 +1107,9 @@ clear_qf_name:
 		case Opt_delayed_alloc:
 			set_opt(sbi->s_mount_opt, DELAYED_ALLOC);
 			break;
+		case Opt_nodelayed_alloc:
+			clear_opt(sbi->s_mount_opt, DELAYED_ALLOC);
+			break;
 		case Opt_ignore:
 			break;
 		case Opt_resize:
