From: Andrew Morton <akpm@linux-foundation.org>

argh at gratuitous unrelated code churn :(

Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
---

 fs/ext4/mballoc.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

Index: linux-2.6.23-rc8/fs/ext4/mballoc.c
===================================================================
--- linux-2.6.23-rc8.orig/fs/ext4/mballoc.c	2007-10-01 21:11:26.000000000 -0700
+++ linux-2.6.23-rc8/fs/ext4/mballoc.c	2007-10-01 21:11:27.000000000 -0700
@@ -2923,7 +2923,7 @@ static int ext4_mb_mark_diskspace_used(s
 		cpu_to_le16(le16_to_cpu(gdp->bg_free_blocks_count)
 				- ac->ac_b_ex.fe_len);
 	spin_unlock(sb_bgl_lock(sbi, ac->ac_b_ex.fe_group));
-	percpu_counter_mod(&sbi->s_freeblocks_counter, - ac->ac_b_ex.fe_len);
+	percpu_counter_add(&sbi->s_freeblocks_counter, - ac->ac_b_ex.fe_len);
 
 	err = ext4_journal_dirty_metadata(handle, bitmap_bh);
 	if (err)
@@ -4354,7 +4354,7 @@ do_more:
 	gdp->bg_free_blocks_count =
 		cpu_to_le16(le16_to_cpu(gdp->bg_free_blocks_count) + count);
 	spin_unlock(sb_bgl_lock(sbi, block_group));
-	percpu_counter_mod(&sbi->s_freeblocks_counter, count);
+	percpu_counter_add(&sbi->s_freeblocks_counter, count);
 
 	ext4_mb_release_desc(&e4b);
 
